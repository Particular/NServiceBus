// == NServiceBus.Core.Analyzer/NServiceBus.Core.Analyzer.Handlers.AddHandlerGenerator/HandlerRegistrations.Handlers.g.cs ==
namespace CustomRegistrations
{
    internal static partial class MyCustomHandlerRegistryExtensions
    {
        internal sealed partial class MyCustomRootRegistry
        {
            internal sealed partial class OrdersRegistry
            {
                partial void AddAllHandlersCore()
                {
                    AddOrderShippedHandler();
                }

                /// <summary>
                /// Registers the <see cref="global::Orders.OrderShippedHandler"/> handler with the endpoint configuration.
                /// </summary>
                public void AddOrderShippedHandler()
                {
                    var settings = NServiceBus.Configuration.AdvancedExtensibility.AdvancedExtensibilityExtensions.GetSettings(_configuration);
                    var messageHandlerRegistry = settings.GetOrCreate<NServiceBus.Unicast.MessageHandlerRegistry>();
                    var messageMetadataRegistry = settings.GetOrCreate<NServiceBus.Unicast.Messages.MessageMetadataRegistry>();
                    messageHandlerRegistry.AddMessageHandlerForMessage<global::Orders.OrderShippedHandler, global::Cmd1>();
                    messageMetadataRegistry.RegisterMessageTypeWithHierarchy(typeof(global::Cmd1), []);
                }
            }
        }
    }
}

// == NServiceBus.Core.Analyzer/NServiceBus.Core.Analyzer.AddHandlerAndSagasRegistrationGenerator/HandlerRegistrations.g.cs ==
namespace CustomRegistrations
{
    /// <summary>
    /// Provides access to handler and saga registries discovered in the <i>RootClassEntryPointName</i> assembly.
    /// </summary>
    [global::System.CodeDom.Compiler.GeneratedCodeAttribute("NService.Core.Analyzer.Tests", "1.0.0")]
    internal static partial class MyCustomHandlerRegistryExtensions
    {
        extension (global::NServiceBus.HandlerRegistry registry)
        {
            /// <summary>
            /// Gets the root registry for handler and saga types in the <i>RootClassEntryPointName</i> assembly.
            /// </summary>
            /// <remarks>
            /// Use the returned registry to access namespace-specific registries and add-all methods for this assembly.
            /// </remarks>
            public MyCustomRootRegistry CustomEntryPoint => new(registry.Configuration);
        }

        /// <summary>
        /// Root registry to add handlers and sagas for the entire assembly.
        /// </summary>
        internal sealed partial class MyCustomRootRegistry(global::NServiceBus.EndpointConfiguration configuration)
        {
            readonly global::NServiceBus.EndpointConfiguration _configuration = configuration ?? throw new System.ArgumentNullException(nameof(configuration));

            /// <summary>
            /// Gets the registry for the <i>Orders</i> namespace segment under this branch.
            /// </summary>
            public OrdersRegistry Orders => new(_configuration);

            /// <summary>
            /// Registers all handlers and sagas for this namespace segment and its child namespaces.
            /// </summary>
            /// <remarks>
            /// Includes child registries: <see cref="Orders"/>.
            /// </remarks>
            public void AddAll()
            {
                AddAllHandlers();
                AddAllSagas();
            }

            /// <summary>
            /// Registers all handlers for this namespace segment and its child namespaces.
            /// </summary>
            /// <remarks>
            /// Includes child registries: <see cref="Orders"/>.
            /// </remarks>
            public void AddAllHandlers()
            {
                AddAllHandlersCore();
                Orders.AddAllHandlers();
            }

            /// <summary>
            /// Registers all sagas for this namespace segment and its child namespaces.
            /// </summary>
            /// <remarks>
            /// Includes child registries: <see cref="Orders"/>.
            /// </remarks>
            public void AddAllSagas()
            {
                AddAllSagasCore();
                Orders.AddAllSagas();
            }

            partial void AddAllHandlersCore();
            partial void AddAllSagasCore();

            /// <summary>
            /// Registry for the <i>Orders</i> namespace segment. Use this registry to add handlers and sagas for this branch.
            /// </summary>
            internal sealed partial class OrdersRegistry(global::NServiceBus.EndpointConfiguration configuration)
            {
                readonly global::NServiceBus.EndpointConfiguration _configuration = configuration ?? throw new System.ArgumentNullException(nameof(configuration));

                /// <summary>
                /// Registers all handlers and sagas for this namespace segment and its child namespaces.
                /// </summary>
                /// <remarks>
                /// Includes handlers in this namespace: <see cref="AddOrderShippedHandler"/>.
                /// </remarks>
                public void AddAll()
                {
                    AddAllHandlers();
                    AddAllSagas();
                }

                /// <summary>
                /// Registers all handlers for this namespace segment and its child namespaces.
                /// </summary>
                /// <remarks>
                /// Includes handlers in this namespace: <see cref="AddOrderShippedHandler"/>.
                /// </remarks>
                public void AddAllHandlers()
                {
                    AddAllHandlersCore();
                }

                /// <summary>
                /// Registers all sagas for this namespace segment and its child namespaces.
                /// </summary>
                public void AddAllSagas()
                {
                    AddAllSagasCore();
                }

                partial void AddAllHandlersCore();
                partial void AddAllSagasCore();
            }
        }
    }
}